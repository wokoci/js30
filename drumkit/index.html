<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="index.css">
  <title>Drumkit task</title>
</head>

<body>
  <div class="container">

    <div class="keys">
      <div data-key='65' class="key">
        <kdb>A</kdb>
        <span class="sound">clap</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='83' class="key">
        <kdb>S</kdb>
        <span class="sound">Hihat</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='68' class="key">
        <kdb>D</kdb>
        <span class="sound">Kick</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='70' class="key">
        <kdb>F</kdb>
        <span class="sound">Openhat</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='71' class="key">
        <kdb>G</kdb>
        <span class="sound">Boom</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='72' class="key">
        <kdb>H</kdb>
        <span class="sound">Ride</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='74' class="key">
        <kdb>J</kdb>
        <span class="sound">snare</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='75' class="key">
        <kdb>K</kdb>
        <span class="sound">Tom</span>
      </div>
    </div>

    <div class="keys">
      <div data-key='76' class="key">
        <kdb>L</kdb>
        <span class="sound">Tink</span>
      </div>
    </div>
    <!-- thie data-key attributes are quoted -->
    <audio data-key='65' src="./audio/clap.wav"></audio>
    <audio data-key='83' src="./audio/hihat.wav"></audio>
    <audio data-key='68' src="./audio/kick.wav"></audio>
    <audio data-key='70' src="audio/openhat.wav"></audio>
    <audio data-key='71' src="audio/boom.wav"></audio>
    <audio data-key='72' src="audio/ride.wav"></audio>
    <audio data-key='74' src="./audio/snare.wav"></audio>
    <audio data-key='75' src="./audio/tom.wav"></audio>
    <audio data-key='76' src="./audio/tink.wav"></audio>

    <hr>
    <div class="returnlink">
      <a href="../index.html"> Return to root page</a>
    </div>
  </div>

  <script>
    window.addEventListener('keyup', playSound);

function playSound(e){
      const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
      const key = document.querySelector(`.key[data-key="${e.keyCode}"]`); // why is it .key? here
      if (!audio) {
        console.log('key not mapped'); 
        return;
      }
      audio.currentTime = 0;
      audio.play();
      key.classList.add('playing');
      const keys = document.querySelectorAll('.key');
      function removeTransition(e){
        if (e.propertyName!=='transform') return;
        this.classList.remove('playing');
      };
     keys.forEach((key)=> {
       key.addEventListener('transitionend', removeTransition) 
      });
}
  </script>
</body>

</html>